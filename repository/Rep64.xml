<?xml version="1.0" encoding="UTF-8"?>

<!--
    This file is part of Npackd.

    Npackd is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Npackd is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Npackd.  If not, see <http://www.gnu.org/licenses/>.
-->

<root>
    <spec-version>2</spec-version>

    <!--
     Packages in alphabetical order (including the reversed domain name prefix.
    -->
    <package name="com.avg.AVGAntiVirusFree64Installer">
        <title>AVG Anti-Virus 64 bit installer</title>
        <url>http://free.avg.com/</url>
        <description>antivirus</description>
    </package>
    <package name="com.googlecode.stexbar.StExBar64">
        <title>StExBar 64 bit</title>
        <url>http://code.google.com/p/stexbar/</url>
        <description>Windows Explorer extensions</description>
    </package>
    <package name="com.googlecode.tortoisegit.TortoiseGit64">
        <title>TotroitseGit 64 bit</title>
        <url>http://code.google.com/p/tortoisegit/</url>
        <description>Windows Explorer extensions for Git</description>
        <license>org.gnu.GPLv2</license>
    </package>
    <package name="com.oracle.JRE64">
        <title>JRE 64 bit</title>
        <url>http://www.java.com/en/</url>
        <description>Java runtime</description>
    </package>
    <package name="org.bitbucket.tortoisehg.TortoiseHg64">
        <title>TortoiseHg 64 bit</title>
        <url>http://tortoisehg.bitbucket.org/</url>
        <description>Mercurial client</description>
    </package>
    <package name="com.tracker-software.PDFXChangeViewer64">
        <title>PDF-XChange Viewer 64 bit</title>
        <url>http://www.tracker-software.com/product/pdf-xchange-viewer</url>
        <description>PDF viewer</description>
    </package>
    <package name="org.7-zip.SevenZIP64">
        <title>7-ZIP 64 bit</title>
        <url>http://www.7-zip.org/</url>
        <description>file archiver</description>
        <!-- s. https://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/3872661/index/page/1 -->
        <icon>http://dl.dropbox.com/u/17046326/picons/org.7-zip.SevenZip.png</icon>
    </package>

    <!--
    The package versions are not sorted by the package, but different version
    of a package should stay together. Newer versions should appear under older
    ones.
    -->
    <version name="1.6.0.23" package="com.oracle.JRE64" type="one-file">
        <file path=".WPM\Install.bat">for /f "delims=" %%x in ('dir /b *.exe') do set setup=%%x
"%setup%" /qn /norestart ALLUSERS=1 INSTALLDIR="%CD%"</file>
        <file path=".WPM\Uninstall.bat">MsiExec.exe /qn /norestart /Lime .WPM\MSI.log /X{26A24AE4-039D-4CA4-87B4-2F86416023FF}</file>
        <url>http://download.oldapps.com/Java/jre-6u23-windows-x64.exe</url>
        <sha1>519b24f1353b62cdf84db90a3f62da01f72e04a9</sha1>
        <detect-msi>{26A24AE4-039D-4CA4-87B4-2F86416023FF}</detect-msi>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>
    <version name="1.6.0.24" package="com.oracle.JRE64" type="one-file">
        <file path=".WPM\Install.bat">for /f "delims=" %%x in ('dir /b *.exe') do set setup=%%x
"%setup%" /qn /norestart ALLUSERS=1 INSTALLDIR="%CD%"</file>
        <file path=".WPM\Uninstall.bat">MsiExec.exe /qn /norestart /Lime .WPM\MSI.log /X{26A24AE4-039D-4CA4-87B4-2F86416024FF}</file>
        <url>http://download.oldapps.com/Java/jre-6u24-windows-x64.exe</url>
        <sha1>A0FCF85253D07966A94AF79E765191A9241EEE68</sha1>
        <detect-msi>{26A24AE4-039D-4CA4-87B4-2F86416024FF}</detect-msi>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="1.8.1" package="com.googlecode.stexbar.StExBar64"
            type="one-file">
        <file path=".WPM\Install.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /i "%setup%" TARGETDIR="%CD%" ALLUSERS=1
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <file path=".WPM\Uninstall.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /x "%setup%"
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <url>http://stexbar.googlecode.com/files/StExBar64-1.8.1.msi</url>
        <sha1>C6B3D4599D147615EFB9069D84AF749D15CBD441</sha1>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="1.1.8" package="org.bitbucket.tortoisehg.TortoiseHg64"
            type="one-file">
        <file path=".WPM\Install.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /i "%setup%" TARGETDIR="%CD%" ALLUSERS=1
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <file path=".WPM\Uninstall.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /x "%setup%"
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <url>http://cdn.bitbucket.org/tortoisehg/stable/downloads/tortoisehg-1.1.8-hg-1.7.3-x64.msi</url>
        <sha1>3688C127C9C2CD58EDB6B75D44E70041408D6746</sha1>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="2.5.192" package="com.tracker-software.PDFXChangeViewer64"
            type="one-file">
        <file path=".WPM\Install.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /i "%setup%" INSTALLLOCATION="%CD%" ALLUSERS=1
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <file path=".WPM\Uninstall.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /x "%setup%"
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <url>http://dl.dropbox.com/u/17046326/files/com.tracker-software.PDFXChangeViewer64-2.5.192.msi</url>
        <sha1>B0F57531069AA73B0C7E4CB49335E07C7856E7DB</sha1>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="1.6.5" package="com.googlecode.tortoisegit.TortoiseGit64"
            type="one-file">
        <file path=".WPM\Install.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /i "%setup%" TARGETDIR="%CD%" ALLUSERS=1
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <file path=".WPM\Uninstall.bat">for /f %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /x "%setup%"
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%
</file>
        <url>http://tortoisegit.googlecode.com/files/Tortoisegit-1.6.5.0-64bit.msi</url>
        <sha1>F01F970100E80DFB74F74E85D21E1A6AB932CDCF</sha1>
        <dependency package="com.googlecode.msysgit.MSysGit" 
                versions="[1.7.4.2011.2.4, 1.7.5)"/>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="9.20" package="org.7-zip.SevenZIP64" type="one-file">
        <file path=".WPM\Install.bat">for /f "delims=" %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /i "%setup%" INSTALLDIR="%CD%" ALLUSERS=1
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%

set key=org.7-zip.SevenZIP64-9.20
reg add HKLM\SOFTWARE\Classes\Applications\%KEY%\shell\open /v FriendlyAppName /d "7-Zip File Manager (7-ZIP/64 bit 9.20)" /f
set c=\"%CD%\7zFM.exe\" \"%%1\"
reg add HKLM\SOFTWARE\Classes\Applications\%KEY%\shell\open\command /d "%c%" /f
for %%g in (001 7z arj bz2 bzip2 cab cpio deb dmg egg fat gz gzip hfs iso lha lzh lzma ntfs rar rpm squashfs swm tar taz tbz tbz2 tgz tpz txz vhd wim xar xz z zip) do reg add HKLM\SOFTWARE\Classes\.%%g\OpenWithList\%key% /f
</file>
        <file path=".WPM\Uninstall.bat">for /f "delims=" %%x in ('dir /b *.msi') do set setup=%%x
msiexec.exe /qn /norestart /Lime .WPM\MSI.log /x "%setup%"
set err=%errorlevel%
type .WPM\MSI.log
rem 3010=restart required
if %err% equ 3010 exit /b 0
if %err% neq 0 exit /b %err%

set key=org.7-zip.SevenZIP64-9.20
reg delete HKLM\SOFTWARE\Classes\Applications\%KEY% /f
for %%g in (001 7z arj bz2 bzip2 cab cpio deb dmg egg fat gz gzip hfs iso lha lzh lzma ntfs rar rpm squashfs swm tar taz tbz tbz2 tgz tpz txz vhd wim xar xz z zip) do reg delete HKLM\SOFTWARE\Classes\.%%g\OpenWithList\%key% /f

mkdir ..\.Trash
move *.dll ..\.Trash\%key%_%RANDOM%
echo clear the error code
</file>
        <url>http://downloads.sourceforge.net/project/sevenzip/7-Zip/9.20/7z920-x64.msi?ts=1300625243</url>
        <sha1>4173FEA2AF9A595FA0BE1EF8251F412229687BE1</sha1>
        <dependency package="com.microsoft.Windows64" versions="[5.0, 10)"/>
    </version>

    <version name="2011.1204" package="com.avg.AVGAntiVirusFree64Installer"
            type="one-file">
        <file path=".WPM\Install.bat">for /f "delims=" %%x in ('dir /b *.exe') do set setup=%%x
ren "%setup%" avg_free.exe
</file>
        <important-file path="avg_free.exe" title="Installer"/>
        <url>http://download.avgfree.com/filedir/inst/avg_free_x64_all_2011_1204a3403.exe</url>
        <sha1>5CFC55F8C5FA82ECF375B87EE7C7FB68BEBA4D63</sha1>
    </version>
</root>
